<!-- Skip to content
zechlau14
/
airborne_transmission_webapp
Private
Code
Issues
Pull requests
Actions
Projects
Security
Insights
Settings
airborne_transmission_webapp/webapp.html
@D-i-m-i
D-i-m-i work done on mask icons
 2 contributors
571 lines (510 sloc)  29.8 KB -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="sheet/webapp_style.css">
    <link rel="stylesheet" href="sheet/hovertext_style.css">
    <!-- CSS only -->

    <!-- link to add Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- <link rel="stylesheet" href="sheet/range_style.css"> -->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>-->
    <title>Airborne Virus Risk Calculator</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body class="body">
  <div class="container-local">
    <div class="banner">
      <!-- <div class="banner-top"> -->
        <!-- <div class="row"> -->
          <!-- <div class="col col-6"> -->
      <div style="display: flex; margin-bottom: 10px; justify-content: space-between; border-bottom: 1px solid black;">
        <img src="images/airvica_logo_c.png" alt="airvica_logo" style="width: 13%; min-width: 80px; max-width: 210px; height: fit-content; margin: 10px">
        <div style="display: flex; align-items: center;">
          <h1 style="margin: 0 0 0 15px; font-size: calc(0.8em + 1.5vw); text-shadow: 2px 4px 3px rgba(0, 0, 0, 0.3);">Airborne Virus Risk Calculator</h1>
        </div>
        <!-- <div style="display: flex;"> -->
        <!-- <div style="display: flex; align-items: center;"> -->
        <div style="text-align: right; width: 220px; display: flex; align-items: center; margin-right: 10px">
          <img src="images/cardiff_logo_c.jpeg" alt="cardiff_uni_logo" style="width: var(--logo-width); height: var(--logo-height); min-width: var(--logo-min-width); margin: var(--logo-margin)">
          <img src="images/oxford_logo_c.png" alt="oxford_uni_logo" style="width: var(--logo-width); height: fit-content; min-width: var(--logo-min-width); margin: var(--logo-margin)">
        </div>
          <!-- </div> -->
        <!-- <div style="display: flex; align-items: center;"> -->
        <!-- </div> -->
        <!-- </div> -->
      </div>
          <!-- </div> -->
        <!-- <div class="title-logos"> -->
          <!-- <div style="display: flex;"> -->
          <!-- <div class="col col-6"> -->
          <!-- </div> -->
        <!-- <div class="col col-sm-12 col-lg-4">
        </div> -->
          <!-- </div> -->
        <!-- <div style="display: flex;">
          <img src="images/oxford_logo_c.png" alt="oxford_uni_logo" style="margin-left: 20px; width: 139px; height: 41px; box-shadow: var(--box-shadow)">
          <img src="images/cardiff_logo_c.jpeg" alt="cardiff_uni_logo" style="width: 88px; height: 41px; margin-left: 10px; box-shadow: var(--box-shadow)">
        </div> -->
        <!-- </div> -->
      <!-- </div> -->
      <!-- Intro text -->

      <!-- <div class="container"> -->
      <div class="banner-text-and-video row">
        <div class="banner-text col-sm-12 col-lg-8">
          <div class="description">
            <p>This webapp helps you estimate the spatially varying infection risk from airborne transmission of the SARS-CoV-2 virus in a rectangular indoor space. The model assumes that the infectious particles carrying the virus are carried around the room by a recirculating airflow, diffused due to turbulence in the air and removed by the room’s ventilation system, the natural inactivation of the virus and gravitational settling. For simplicity’s sake, the model only considers a single stationary, asymptomatic, infectious person in the room.</p>
            <p>For a simple explanation of the model and the parameters chosen, please refer <a href="Simple_Explanation.pdf">here</a>.</p>
            <p>For a full write-up of the scientific basis of the model, please refer to <a href="https://doi.org/10.1098/rspa.2021.0383" target="_blank">our paper</a>.</p>

          </div>

          <div class="disclaimer">
            <p> <b>Disclaimer</b>:
              The results from this model, including the estimated infection risk, should be used with caution. Many of the inputs are uncertain due to a lack of data and the evolving nature of the virus. Furthermore, this model only calculates the risk of airborne transmission; it does not include the risk of short-range droplet transmission which can be minimized by social distancing. By using this webapp, you acknowledge its limitations and use it at the user’s own risk. To the fullest extent permitted by law, the authors of the website and app shall have no liability for any loss or damage suffered as a result of users’ use of or reliance on it.
            </p>
          </div>
        </div>
        <div class="embedded-video col" style="min-height: 285px;">
          <!-- <img src="images/virus.jpg" alt="virus_illustration" style="height: 406px;"> -->
          <iframe width="90%" height="100%" src="https://www.youtube.com/embed/udfSJ1wj1YE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          <!-- <iframe width="100%" height="100%" src="https://www.youtube.com/embed/udfSJ1wj1YE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->
        </div>
      </div>
    <!-- </div> -->
    </div>


    <div class=controls-plots-area style="margin-top: 30px;">
      <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
        <div style="display: flex; flex-direction: column;">
        <h2 class="h2-local">Parameters</h2>
        <!-- model inputs -->
        <div style="display: flex; justify-content: start; flex-direction: column;">

          <div class="controls-card" style="width:88vw; max-width: 400px; height:fit-content; min-height: 226px; margin-top: 0px">
            <div class="card-headings">
              <p class="h2-local">Ventilation</p>
              <span class="hovertext" text-hover="This is the placholder text for the card description">
                <img src="images/info_mark.png" alt="card information" class="question-mark">
              </span>
            </div>
            <div class="controls-alignment">
              <div class="control-padding">
                <label for="vent">Ventilation rate (ACH) </label>
                <select id="vent" name="vent" onchange="show_hide_custom(this)">
                  <option value="0.2"> Very poor (0.2 ACH)</option>
                  <option value="0.7" selected> Poor (0.7 ACH)</option>
                  <option value="3"> Good (3.0 ACH)</option>
                  <option value="6"> Very good (6.0 ACH)</option>
                  <option value="customOption">Choose your own ACH value</option>
                </select><input type="range" id="vent-custom" name="vent-custom" style="display:none;" min="0.1" step="0.01"
                value="3" max="40" oninput="this.nextElementSibling.value = this.value;"> </input>
                <output style="display:none;">3</output>
              </div>

              <div class="control-padding" style="padding-bottom: 10px;">
                <label for="airflow">Airflow speed (m/s)</label>
                <!--<select id="airflow" name="airflow" onchange="if(this.options[this.selectedIndex].value=='customOption'){
                    this.style.display='none'; this.nextElementSibling.style.display='inline';
                }"> -->
                <select id="airflow" name="airflow" onchange="show_hide_custom(this)">
                  <option value="0"> Off (0  m/s)</option>
                  <option value="0.15" selected> Medium (0.15 m/s)</option>
                  <option value="0.8"> High (0.8 m/s)</option>
                  <option value="customOption">Choose your own airflow speed</option>
                </select><input type="range" id="airflow-custom" name="airflow-custom" style="display:none;" min="0" step="0.01"
                value="0.5" max="3" oninput="this.nextElementSibling.value = this.value;"> </input>
                <output style="display:none;">0.5</output>
              </div>
            </div>
          </div>

          <div class="controls-card" style="width:88vw; max-width: 400px; height:fit-content; min-height: 226px; margin-bottom: 20px;">
            <div class="card-headings">
              <p class="h2-local">Event</p>
              <span class="hovertext" text-hover="This is the placholder text for the card description">
                <img src="images/info_mark.png" alt="card information" class="question-mark">
              </span>
            </div>
            <!-- <div class="controls-alignment"> -->
              <div class="control-padding">
                <label for="duration"> Event duration (hours)</label>
                <input type="range" id="duration" name="duration" min="0.25" max="3" value="0.5" step="0.05"
                oninput="this.nextElementSibling.value = this.value;" onmouseup="pass_break();">
                <output>0.5</output>
              </div>

              <div class="control-padding" style="padding-bottom: 10px;">
                <div>
                  <label for="break"> Add a break?</label>
                  <input type="checkbox" id="break" name="break" onclick="add_break()"> Yes
                </div>

                <div id="break-inputs">
                  <div style="display: flex; flex-direction: column;">
                    <div>
                      <label for="break-inputs"> Set when the break starts and ends.<br></label>
                    </div>

                    <div>
                      <input type="range" id="break-part1" name="break-part1"
                      min="0" max="0.5" step="0.05" value="0.2" oninput="show_break_numbers()">
                      <input type="range" id="break-part2" name="break-part2"
                      min="0" max="0.5" step="0.05" value="0.3" oninput="show_break_numbers()">
                    </div>
                  </div>
                  <br>
                  <div id="break-numbers">
                    <span id="break-start">0.2</span>
                    <span id="break-end">0.3</span>
                  </div>
                  <div id="break-numbers"><span>start</span> <span>end</span></div>
                </div>
              </div>
            <!-- </div> -->
          </div>
        </div>
      </div>

        <div style="display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: flex-start;">
            <div>
              <h2 class="h2-local">3D room and air circulation illustration</h2>
            </div>
            <div style="margin-top: 5px;">
              <span class="hovertext" text-hover="This is the placholder text for the card description">
                <img src="images/info_mark.png" alt="card information" class="question-mark">
              </span>
            </div>
          </div>
          <div class="room-air-illustration">
            <img src="images/air_circulation.png" alt="air_circulation_schematic" style="width: 100%; border-radius: 12px;">
          </div>
        </div>
      </div>

      <br>
      <!-- <br> -->
      <!-- continuation of model inputs -->
      <!-- button to show Advanced inputs to the model -->
      <button type="button" onclick="advanced_options()" class="secondary-button">Advanced Options</button> <br>

      <div name="advanced-options" id="advanced-options" class="advanced-card" style="display:none;">
        <div class="card-headings">
          <p class="h2-local">Advanced Options</p>
          <span class="hovertext" text-hover="This is the placholder text for the card description">
            <img src="images/info_mark.png" alt="card information" class="question-mark">
          </span>
        </div>
        <div class="controls-alignment">
          <div class="control-padding">
            <label for="emission"> Respiratory droplet emission rate for breathing (particles/min)</label>
              <input type="number" name="emission" id="emission" value="480" min="0">

              <label for="viral-load">Viral load of infectious person (virus/mL)</label>
              <!--<select id="viral-load" name="viral-load" onchange="if(this.options[this.selectedIndex].value=='customOption'){
                  this.style.display='none'; this.nextElementSibling.style.display='inline';
              }"> -->
              <select id="viral-load" name="viral-load" onchange="show_hide_custom(this)">
                  <option value="4"> Low (10^4)</option>
                  <option value="7"> Average (10^7))</option>
                  <option value="9" selected> High (10^9))</option>
                  <option value="12"> Very high (10^12))</option>
                  <option value="customOption">Choose your own</option>
                  </select><input type="number" id="viral-load-custom" name="viral-load-custom" style="display:none;" min="0"> </input>
          </div>

          <div class="control-padding" style="padding-bottom: 10px; padding-right: 10px;">
            <label for="deact">Virus deactivation rate (1/h)</label>
              <input type="number" name="deact" id="deact" value="0.636" min="0">

              <label for="settle">Gravitational settling rate (1/h)</label>
              <input type="number" name="settle" id="settle" value="0.122" min="0">

              <label for="Inf-Const"> Median Infectious Dose </label>
              <input type="number" name="Inf-Const" id="Inf-Const" value="200" min="1">
          </div>

          <div class="control-padding">
            <b>Step size</b>
              <label for="delta-x"> &Delta;x (m) </label>
              <input type="number" name="delta-x" id="delta-x" value="0.16" min="0" max="1">

              <label for="delta-y"> &Delta;y (m) </label>
              <input type="number" name="delta-y" id="delta-y" value="0.16" min="0" max="1">

              <label for="delta-t"> &Delta;t (s) </label>
              <input type="number" name="delta-t" id="delta-t" value="3" min="0" max="20">
          </div>
          <div class="control-padding" style="padding-bottom: 0px;">
            <p><em>Warning: making these too small will cause the calculation of the infection risk in the room to be extremely slow.</em></p>
          </div>
        </div>
      </div>

      <div name="advanced-options" id="advanced-options" class="boxed" style="display:none;">
          <h3>Advanced options</h3>
          <p> <label for="emission"> Respiratory droplet emission rate for breathing (particles/min)</label>
              <input type="number" name="emission" id="emission" value="480" min="0">

              <label for="viral-load">Viral load of infectious person (virus/mL)</label>
              <select id="viral-load" name="viral-load" onchange="if(this.options[this.selectedIndex].value=='customOption'){
                  this.style.display='none'; this.nextElementSibling.style.display='inline';
              }">
                  <option value="4"> Low (10^4)</option>
                  <option value="7"> Average (10^7))</option>
                  <option value="9" selected> High (10^9))</option>
                  <option value="12"> Very high (10^12))</option>
                  <option value="customOption">Choose your own</option>
                  </select><input type="number" id="viral-load-custom" name="viral-load-custom" style="display:none;" min="0"> </input>
          </p>

          <p>
              <label for="deact">Virus deactivation rate (1/h)</label>
              <input type="number" name="deact" id="deact" value="0.636" min="0">

              <label for="settle">Gravitational settling rate (1/h)</label>
              <input type="number" name="settle" id="settle" value="0.122" min="0">

              <label for="Inf-Const"> Median Infectious Dose </label>
              <input type="number" name="Inf-Const" id="Inf-Const" value="200" min="1">
          </p>

          <p> <b>Step size</b>
              <label for="delta-x"> Delta x (m) </label>
              <input type="number" name="delta-x" id="delta-x" value="0.16" min="0" max="1">

              <label for="delta-y"> Delta y (m) </label>
              <input type="number" name="delta-y" id="delta-y" value="0.16" min="0" max="1">

              <label for="delta-t"> Delta t (s) </label>
              <input type="number" name="delta-t" id="delta-t" value="3" min="0" max="20">
          </p>
          <p>  Warning: making these too small will cause the calculation of the infection risk in the room to be extremely slow. </p>

      </div>

      <br>
      <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
        <div style="display: flex; flex-direction: column;">
          <div style="display: flex; justify-content: flex-start;">
            <div>
              <p class="h2-local">Dynamic 2D room representation</p>
            </div>
            <div style="margin-top: 5px;">
              <span class="hovertext" text-hover="This is the placholder text for the card description">
                <img src="images/info_mark.png" alt="card information" class="question-mark">
              </span>
            </div>
          </div>
          <!-- Room rectangle can be dragged to resize.
            and the Infectious person dot can be dragged to be repositioned.-->
          <div style="display: flex; flex-direction: column; margin-bottom: 20px;">
            <div style="display: flex;">
              <p style="margin: 0px 5px 5px 0;"><strong>Masks worn</strong></p>
              <div style="display: flex;">
                <div style="margin-bottom: 10px">
                  <img src="images/infected_person.png" alt="infectious_person_illustration" style="aspect-ratio: 1/1; width: 40px;">
                  <span class="mask_pic" id="inf_mask_pic"></span>
                </div>
                <div>
                  <img src="images/susceptible_person.png" alt="susceptible_person_illustration" style="aspect-ratio: 1/1; width: 40px;">
                  <span class="mask_pic" id="occ_mask_pic"> </span>
                </div>
              </div>
            </div>
            <div style="display: flex; flex-wrap: wrap">
            <div class="room-visual" id="room-visual" ondragover="allowDrop(event);" style="margin-right: 10px; margin-bottom: 10px;">
              <!-- <div class="drag_dot" id="source_dot" draggable="true" ondrag='dragInf(event);' ondragend="dragInfend(event);"></div> -->
                <div style="display: flex;">
                <!--<div class="infectious-avatar" id="source_dot" draggable="true" ondragstart="event.dataTransfer.setData('text/plain', this.id);" ondrag='dragInf(event);' ondragend="dragInfend(event);"></div>-->
                <!--<div class="infectious-avatar" id="susceptible_dot" draggable="true" ondragstart="event.dataTransfer.setData('text/plain', this.id);" ondrag="dragSus(event);" ondragend="dragSusend(event);"></div>-->
                  <div class="infectious-avatar" id="source_dot"></div>
                  <div class="susceptible-avatar" id="susceptible_dot"></div>
                </div>
            </div>
            <div style="display: flex; flex-wrap: wrap;">
              <div class="controls-card" style="margin-top: 0; margin-bottom: 10px; width: var(--room-cards-width); max-width: var(--room-cards-max-width);">
                <div class="card-headings">
                  <p class="h2-local">Room dimensions</p>
                  <span class="hovertext" text-hover="This is the placholder text for the card description">
                    <img src="images/info_mark.png" alt="card information" class="question-mark">
                  </span>
                </div>
                <div class="controls-alignment">
                  <div class="control-padding">
                    <label for="room-presets">Presets</label><br>
                    <div style="display: flex; flex-direction: column;">
                      <div><input type="radio" name="room-presets" id="classroom-choice" onclick="room_presets(id)" checked="checked">Classroom / Living Room</input></div>
                      <div><input type="radio" name="room-presets" id="office-choice" onclick="room_presets(id)">Personal Office / Room </input></div>
                      <div><input type="radio" name="room-presets" id="reception-choice" onclick="room_presets(id)">Reception</input></div>
                      <div><input type="radio" name="room-presets" id="custom-room-preset" onclick="room_presets(id)">Custom</input></div>
                    </div>
                  </div>

                  <div class="control-padding">
                    <label for="room-length"> Length (m) </label>
                    <input type="range" id="room-length" name="room-length" min="2" max="10" value="5" step="0.1"
                    oninput="passRoomLength(); room_preset_custom()">
                    <!-- oninput, passRoomLength changes the length of the room visualisation-->
                    <output> 5 </output>
                  </div>

                  <div class="control-padding">
                    <label for="room-length"> Width (m) </label>
                    <input type="range" id="room-width" name="room-width" min="2" max="10" value="5" step="0.1"
                    oninput="passRoomWidth(); room_preset_custom()">
                    <!-- oninput, passRoomWidth changes the length of the room visualisation-->
                    <output> 5 </output>
                  </div>

                  <div class="control-padding" style="padding-bottom: 10px;">
                    <label for='roomd-height'> Height (m)</label>
                    <input type="range" id="room-height" name="room-height" min="2" max="4" value="2.5" step="0.1"
                    oninput="this.nextElementSibling.value = this.value; room_preset_custom()">
                    <output>2.5</output>
                  </div>
                </div>
              </div>
              <div class="controls-card" style="display: flex; flex-direction: column; justify-content: space-between; margin-top: 0px; margin-bottom: 10px; width: var(--room-cards-width); max-width: var(--room-cards-max-width);">
              <div class="card-headings">
                <p class="h2-local">Infectious person</p>
                <span class="hovertext" text-hover="This is the placholder text for the card description">
                  <img src="images/info_mark.png" alt="card information" class="question-mark">
                </span>
              </div>
              <!-- <div class="controls-alignment"> -->
                <div class="control-padding">
                  <label for='x0' style="font-size: 30px">&harr;</label>
                  <input type='range' id="x0" name="x0" min="0" value="2.5" max="5" step="0.01"
                  oninput="pass_source_coord();">
                  <!-- oninput, passX0 updates the infectious person dot-->
                  <output> 2.5 </output>
                </div>

                <div class="control-padding">
                  <label for='y0' style="font-size: 30px">&#8597;</label>
                  <input type='range' id="y0" name="y0" min="0" value="2.5" max="5" step="0.01"
                  oninput="pass_source_coord();">
                  <!-- oninput, passY0 updates the infectious person dot-->
                  <output> 2.5 </output>
                </div>

                <div class="control-padding">
                  <label for="talk">Activity</label>
                  <select id="talk" name="talk" onchange="show_hide_custom_percent(this)">
                    <option value="0"> Just breathing</option>
                    <option value="100" selected> Just talking </option>
                    <option value="customOption">Choose the % of time talking</option>
                  </select>
                  <input type="range" id="talk-custom" name="talk-custom" style="display:none;" min="0" max="100" step="1" value="50"
                  oninput="this.nextElementSibling.value = this.value + '%'; this.nextElementSibling.style='display:inline';"></input>
                  <output style="display:none">50%</output>
                </div>

                <div class="control-padding" style="padding-bottom: 10px">
                  <label for="inf-mask">Mask worn</label>
                  <select id="inf-mask" name="inf-mask" onchange="inf_mask_visual(); show_hide_custom_percent(this)">
                    <option value="0" selected> No mask</option>
                    <option value="0.35"> 1-ply Cloth mask (35%)</option>
                    <option value="0.5"> 3-ply Cloth mask (50%)</option>
                    <option value="0.59"> Surgical mask (59%)</option>
                    <option value="0.9"> N95/FFP2 mask (95%) </option>
                    <option value="customOption">Choose your own mask efficiency (%)</option>
                    </select>
                  <input type="range" id="inf-mask-custom" name="inf-mask-custom" style="display:none;" min="0" max="100" step="1" value="0"
                      onblur="if(this.value==''){toggleField(this,this.previousSibling);}" oninput="this.nextElementSibling.value = this.value + '%'; this.nextElementSibling.style='display:inline';"> </input>
                  <output style="display:none">0%</output>
                  <!-- <span class="mask_pic" id="inf_mask_pic"> </span> -->
                </div>
              <!-- </div> -->
            </div>
            <div class="controls-card" style="display: flex; flex-direction: column; justify-content: space-between; margin-top: 0px; width: var(--room-cards-width); max-width: var(--room-cards-max-width);">
              <div class="card-headings">
                <p class="h2-local">Susceptible person</p>
                <span class="hovertext" text-hover="This is the placholder text for the card description">
                  <img src="images/info_mark.png" alt="card information" class="question-mark">
                </span>
              </div>

              <!-- <div class="controls-alignment"> -->
                <div class="control-padding">
                  <label for="x_e" style="font-size: 30px">&harr;</label>
                    <input type="range" id="x_e" name="x_e" min="0" max="5" value="1.25" step="0.01"
                    oninput="pass_sus_coord();">
                    <output>1.25</output>
                </div>

                <div class="control-padding">
                  <label for="y_e" style="font-size: 30px">&#8597</label>
                    <input type="range" id="y_e" name="y_e" min="0" max="5" value="1.25" step="0.01"
                    oninput="pass_sus_coord();">
                    <output>1.25</output>
                </div>

                <div class="control-padding">
                  <label for="occ-act">Activity (breathing rate)</label>
                    <!--<select id="occ-act" name="occ-act" onchange="if(this.options[this.selectedIndex].value=='customOption'){
                        this.style.display='none'; this.nextElementSibling.style.display='inline'; this.nextElementSibling.nextElementSibling.style.display='inline';
                    }"> -->
                    <select id="occ-act" name="occ-act" onchange="show_hide_custom(this)">
                      <option value="6" selected> Sedentary (6 l/min)</option>
                      <option value="18"> Active (18 l/min)</option>
                      <option value="54"> Moderate exercise (54 l/min)</option>
                        <option value="customOption">Choose your own breathing rate</option>
                      </select><input type="range" id="occ-act-custom" name="occ-act-custom" style="display:none;" min="3" step="0.1"
                      value="6" max="120" oninput="this.nextElementSibling.value = this.value+' l/min';"> </input>
                      <output style="display:none;">6 l/min</output>
                </div>

                <div class="control-padding" style="padding-bottom: 10px">
                  <label for="occ-mask">Mask worn</label>
                    <!--<select id="occ-mask" name="occ-mask" onchange="sus_mask_visual();if(this.options[this.selectedIndex].value=='customOption'){
                        this.style.display='none'; this.nextElementSibling.style.display='inline'; this.nextElementSibling.nextElementSibling.style.display='inline';
                    }"> -->
                    <select id="occ-mask" name="occ-mask" onchange="sus_mask_visual(); show_hide_custom_percent(this)">
                        <option value="0" selected> No mask</option>
                        <option value="0.2"> 3-ply Cloth mask (20%)</option>
                        <option value="0.5"> Surgical mask (50%)</option>
                        <option value="0.9"> N95/FFP2 mask (90%) </option>
                        <option value="customOption">Choose your own mask efficiency (%)</option>
                    </select><input type="range" id="occ-mask-custom" name="occ-mask-custom" style="display:none;" min="0" max="100" step="1" value="0"
                    oninput="this.nextElementSibling.value = this.value + '% efficency'; this.nextElementSibling.style='display:inline';"> </input>
                    <output style="display:none">0% efficiency</output>
                </div>
              <!-- </div> -->
            </div>
          </div>
          </div>

            </div>
            <br>
          </div>


          <!--
          <div>
            <p style="margin: 0px 0px 5px 5px;"><strong>Mask worn:</strong></p>
            <div style="display: flex">
            <div>
              <img src="images/infected_person.png" alt="infectious_person_illustration" style="aspect-ratio: 1/1; width: 40px;">
            </div>
            <div>
            </div>
            </div>
          </div>
          -->






      </div>

      <hr style="border: 1px solid black;">
      <div style="display: flex; flex-direction: column;">
          <div>
            <h2>Results</h2>
          </div>
          <div>
            <button type="button" onclick="Run_no_modes()" class="results-button">Run</button>
            <button type="button" onclick="reset_results();" class="results-stop-button">Stop</button>
          </div>


          <!-- loading bar to show progress of model-->
          <div class="progress-bar-local" id="progress-bar" style="margin-top: 10px;">
            <div class="the-bar" id="the-bar" style="display:none;"></div>
          </div>
        </div>
        <div style="display: flex; margin-top: 10px; justify-content: space-between; flex-wrap: wrap">
          <div id="output-msg" style="display: none">
            <div style="display: flex; flex-direction: column;">
              <div style="margin-top: 15px;">
                <h3>% infection</h3>
              </div>
              <!-- <div style="box-shadow:  var(--box-shadow); border-radius: var(--border-radius); margin-bottom: 15px"> -->
                <p class="output-message"><span id="risk_avg" style="display:none"></span><span id="infected" style="display:none"></span></p>
              <!-- </div> -->
            </div>
          </div>
          <div>
            <div id="chart_area" style="display: none; width: 100vw">
              <div style="display: flex; flex-direction: column;">
                <div>
                  <h3>Infection risk at the end of the event</h3>
                </div>
                <div id='inf-contour' class="chart" style="display:none; max-width: 90vw; margin-left: -50px"> </div>
                  <!-- <div class="chart">
                     <p id="chart_time"></p>
                     <div id='inf-contour' style="display:none"> </div>
                  </div> -->
              </div>
            </div>
          </div>
        </div>
      <div style="margin-top: 10px;">
        <button type="button" class="secondary-button" onclick="explore_more()">Explore more</button>
      </div>
      <div id="Explore_more_container" style="display: none; margin-top: 15px;">
        <div>
          <h3 style="font-size: var(--font-size-results)">Calculate the concentration and risk at a specific position</h3>
          <button type="button" onclick="Run_position()" class="primary-button">Run</button>
          <button type="button" onclick="reset_results()" class="stop-button">Stop</button>
          </div>

          <!-- <div class="loader" id="loading" style="display:none"></div> -->
          <div class="progress-bar-local">
            <div class="the-bar" id="position-loading" style="display:none;">   </div>
          </div>

          <div class="chart_container">
          <div class="chart">
          <div id="conc-output" style="display:none; width:90vw; margin-left: -30px"> </div>
          </div>

          <div class="chart">
          <div id="risk-output" style="display:none; width:90vw; margin-left: -30px"> </div>
          </div>

          </div>
          <!-- <br> -->

          <div style="margin-top: 20px;">
            <h3 style="font-size: var(--font-size-results)">Calculate the concentration throughout the room at the end of the event</h3>
            <button type="button" onclick="Run_C_contour()" class="primary-button">Run</button>
            <button type="button" onclick="reset_results()" class="stop-button">Stop</button>
          </div>
        <!-- <div class="loader" id="loading2" style="display:none"></div> -->
        <div class="progress-bar-local">
          <div class="the-bar" id="C-contour-loading" style="display:none;">   </div>
        </div>

        <div class="chart" id="conc_contour" style="display:none; max-width: 90vw; margin-left: -45px; margin-top: 30px;"> </div>

        <!-- <br> -->

        <div style="margin-top: 30px;">
          <h3 style="font-size: var(--font-size-results)">Calculate the average concentration in the room</h3>
          <button type="button" onclick="Run_avg_C()" class="primary-button">Run</button>
          <button type="button" onclick="reset_results()" class="stop-button">Stop</button>
        </div>
        <!-- <br> -->

          <!-- loading bar to show progress of model-->
          <div class="progress-bar-local">
              <div class="the-bar" id="C-avg-loading" style="display:none;">   </div>
          </div>

          <div class="chart">
          <div id='C_avg-time' style="width: 90vw; margin-left: -30px"> </div>
          <span id="avg" style="display:none;"> </span>
          </div>


          <div style="margin-top: 30px;">
            <h3 style="font-size: var(--font-size-results)">Calculate the average infection risk in the room</h3>
            <button type="button" onclick="Run_avg_P()" class="primary-button">Run</button>
            <button type="button" onclick="reset_results()" class="stop-button">Stop</button>
          </div>
          <!-- <br> -->
          <!-- loading bar to show progress of model-->
          <div class="progress-bar-local">
            <div class="the-bar" id="P-avg-loading" style="display:none;">   </div>
          </div>

          <div class="chart">
            <div id='P_avg-time' style="width: 90vw; margin-left: -30px;"> </div>
            <span id="purifier" style="display:none"> </span>
          </div>
      </div>
      <footer style="margin-top: 10px">Credits</footer>
    </div>
      <script src='script/webapp_form.js'></script>
      <script src="script/webapp_room.js"></script>
      <script src="script/webapp_run.js"></script>
      <br>
  </div>
</body>

</html>
